<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Sentimental Crane</title>
	
	<style type="text/css">
		body {
			padding-top: 60px;
			padding-bottom: 40px;
		}
		.search {
			max-width: 400px;
		}
		#analysis label {
			display: none;
		}
		#footer {
			text-align: center;
		}
		.error {
			color: red;
		}
	</style>
	
    <!-- Bootstrap -->
    <link href="css/bootstrap.css" rel="stylesheet">
	<link href="css/bootstrap-responsive.css" rel="stylesheet">
	<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
	<!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
	
	<!-- jquery -->
	<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
	<script src="http://code.jquery.com/jquery-1.8.2.js" ></script>
	<script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js" ></script>
	
	<script>
    $(function() {
        $( "#fromInput" ).datepicker();
    });
	$(function() {
        $( "#toInput" ).datepicker();
    });
    </script>
  </head>
  <body>
    <h1 style="display:none;">Sentimental Crane</h1>
	
	<div class="navbar navbar-inverse navbar-fixed-top">
		<div class="navbar-inner">
			<div class="container">
				<a class="brand" href="#">Sentimental Crane</a>
			</div>
		</div>
	</div>
	
	<div class="container search">
		<div class="hero-unit">
			<h2>Twitter Analysis</h2>
			<form name="Sentiment analysis" method="post" id="analysis" action="./analysis">
				<fieldset>
					<div id="company">
						<label for="companyInput">Company:</label>
						<input type="text" name="company" id="companyInput" class="input-block-level" placeholder="Company"/>
						<label for="companyInput" class="error" id="company_error">This field is required</label>
					</div>
			
					<div id="from">
						<label for="fromInput">From:</label>
						<input type="text" name="timeFrom" id="fromInput" class="input-block-level" placeholder="From"/>
						<label for="companyInput" class="error" id="from_error">This field is required</label>
					</div>
					
					<div id="to">
						<label for="toInput">To:</label>
						<input type="text" name="timeTo" id="toInput" class="input-block-level" placeholder="To"/>
						<label for="companyInput" class="error" id="to_error">This field is required</label>
					</div>
					
					<button type="submit" id="analyseSubmit" class="btn btn-primary btn-large">Start Analysis</button>
					
					<script>
					  $(function() {
						    $('.error').hide();
						    $("#analyseSubmit").click(function() {
						      // validate and process form here
						      $('.error').hide();
						      var focus = "";
						  	  var company = $("input#companyInput").val();
						  	  if (company == "") {
						        $("label#company_error").show();
						        if (focus == "") {
						        	focus = "input#companyInput";
						        }
						      }
						  	  var from = $("input#fromInput").val();
						  	  if (from == "") {
						        $("label#from_error").show();
						        if (focus == "") {
						        	focus = "input#fromInput";
						        }
						      }
						  	  var to = $("input#toInput").val();
						  	  if (to == "") {
						        $("label#to_error").show();
						        if (focus == "") {
						        	focus = "input#toInput";
						        }
						      }
						  	  if (focus != "") {
						  		  $(focus).focus();
						  		  return false;
						  	  }
						    });
						  });
					</script>
				</fieldset>
			</form>
		</div>
	</div>

	<div id="footer" class="navbar navbar-inverse navbar-fixed-bottom">
		<div class="navbar-inner">
			<div class="container">
				Active instances
				<script>
					function pollActiveInstances(){
					    $.post('server-status', function(data) {
							$('#activeInstances').text(data);
					        setTimeout(pollActiveInstances,5000);
					    });
					}
					
					$(document).ready(function() {
						pollActiveInstances();
					});
				</script>
				<span id="activeInstances"></span>
			</div>
		</div>
	</div>
  </body>
</html>